# DNS Record

```go
type DNSRecord struct {
	ID               int              `json:"id,omitempty"`
	Created          *types.DateTime  `json:"created,omitempty"`
	Modified         *types.DateTime  `json:"modified,omitempty"`
	Name             string           `json:"name"`
	Value            string           `json:"value"`
	RecordType       string           `json:"recordType"`
	AlternativeCNAME string           `json:"alternativeCname,omitempty"`
	Comment          string           `json:"comment,omitempty"`
	Active           bool             `json:"active"`
	Enabled          bool             `json:"enabled"`
	TTL              int              `json:"ttl"`
	Priority         int              `json:"priority,omitempty"`
	Port             int              `json:"port,omitempty"`
	UpstreamOptions  *UpstreamOptions `json:"upstreamOptions,omitempty"`
}
```

| Field | Type | Description |
|---|---|---|
| `ID` | int | Id is an unique identifier for an object. This value is always a number type and cannot be set while inserting a new object. To update or delete a DnsRecord it is necessary to add this attribute to your object. |
| `Created` | *types.DateTime | Created is a date type attribute with an ISO8601 format. It will be created by the server after creating a new DnsRecord object. This value is only informational so it is not necessary to add this an attribute to any API call. |
| `Modified` | *types.DateTime | Identifies the version of the object. To ensure that you are updating the most recent version and not overwriting other changes, you always have to add modified for updates and deletions. This value is always a date type with an ISO8601 format. |
| `Name` | string | Subdomain name of a DNS record. |
| `Value` | string | Depends on the record type. Typically an IPv4/6 address or a domain entry |
| `RecordType` | string | This value sets the type of the DNS record. All available record types are A, AAAA, MX, CNAME, TXT, NS, SRV and PTR. PTR records are only useable on .arpa domains. |
| `AlternativeCNAME` | string | The alternative CNAME that points to the current record. This attribute is generated by the API and cannot be set. |
| `Comment` | string |  |
| `Active` | bool | This information shows if this record is protected by Myra. |
| `Enabled` | bool |  |
| `TTL` | int | Time to live limits the time a DNS record entry can be cached by DNS servers. This typically sets the timeframe how long changes need to be propagated to the DNS servers. This is a numeric value and is given in seconds. |
| `Priority` | int | Priority for MX and SRV records. |
| `Port` | int | Port information for SRV records. |
| `UpstreamOptions` | *UpstreamOptions | The load balance setting lets you configure the way different IP addresses pointing to the same DNS record name behave. |

```go
type UpstreamOptions struct {
	ID          int             `json:"id,omitempty"`
	Created     *types.DateTime `json:"created,omitempty"`
	Modified    *types.DateTime `json:"modified,omitempty"`
	Backup      bool            `json:"backup"`
	Down        bool            `json:"down"`
	FailTimeout int             `json:"failTimeout"`
	MaxFails    int             `json:"maxFails"`
	Weight      int             `json:"weight"`
}
```

| Field | Type | Description |
|---|---|---|
| `ID` | int | Id is an unique identifier for an object. This value is always a number type and cannot be set while inserting a new object. To update or delete a DnsRecord it is necessary to add this attribute to your object. |
| `Created` | *types.DateTime | Created will be created by the server after creating a new UpstreamOptions object. This value is only informational so it is not necessary to add this an attribute to any API call. |
| `Modified` | *types.DateTime | Identifies the version of the object. To ensure that you are updating the most recent version and not overwriting other changes, you always have to add modified for updates and deletions. |
| `Backup` | bool | Marks the origin server as backup. The servers marked as backup will receive the requests when the primary servers are unavailable. |
| `Down` | bool | Marks the origin server as permanently unavailable. |
| `FailTimeout` | bool | The time during which the specified number of unsuccessful attempts to communicate with the origin should happen to consider the origin unavailable and the period of time the origin will be considered unavailable. |
| `MaxFails` | int | Sets the number of unsuccessful attempts to communicate with the origin that should happen in the duration set by the failTimeout parameter to consider the origin unavailable for a duration also set by the failTimeout parameter. |
| `Weight` | int | Defines the priority for the origin server, the higher the number, the higher the priority of the server. |


## Create
To create a new DNS entry you have to send a DnsRecord object without the attributes "id", "created", and "modified". All attributes are generated by the server and returned after that.

### Example
```go
rec := &myrasec.DNSRecord{
    Name:       "www",
    Value:      "127.0.0.1",
    RecordType: "A",
    TTL:        300,
    Active:     true,
    Enabled:    true,
    UpstreamOptions: &myrasec.UpstreamOptions{
        Backup:      false,
        Down:        false,
        FailTimeout: 1,
        MaxFails:    100,
        Weight:      1,
    },
}
r, err := api.CreateDNSRecord(rec, "example.com")
if err != nil {
    panic(err)
}
```


## Read
The listing operation returns a list of DNS records for the passed domain name.

### Example
```go
records, err := api.ListDNSRecords(domainName, nil)
if err != nil {
    log.Fatal(err)
}
```

It is possible to pass a map of parameters (`map[string]string`) to the `ListDNSRecords` function.

| Name | Description | Default |
|---|---|---|
| `search` | Filters the DNS records with the specified string in the name or in the value field | null |
| `page` | Specify the page of the result | 1 |
| `pageSize` | Specify the amount of results in the response | 50 |
| `recordTypes` | Filters the DNS by record type. It is possible to specify more than one record type as a comma separated list | null |
| `activeOnly` | Wen set to "true" only active DNS records are returned | false |
| `loadbalancer` | When set to true only returns the DNS record that are being load balanced | false |

## Update
Updating a DNS record is very similar to creating a new one. You will need to provide the generated "id" and "modified" attributes to identify the version of object you are trying to update.

### Example
```go
rec := &myrasec.DNSRecord{
    ID:   0000,
    Modified: &types.DateTime{
        Time: modified,
    },
    Value:      "127.0.0.1",
}

r, err := api.UpdateDNSRecord(rec, "example.com");
if err != nil {
    log.Fatal(err)
}
```


## Delete
To delete a DNS record it is only necessary to send "id" and "modified" as body content to identify the version of the record you are trying to delete.

### Example
```go
rec := &myrasec.DNSRecord{
    ID:   0000,
    Modified: &types.DateTime{
        Time: modified,
    },
}

r, err := api.DeleteDNSRecord(rec, "example.com");
if err != nil {
    log.Fatal(err)
}
```